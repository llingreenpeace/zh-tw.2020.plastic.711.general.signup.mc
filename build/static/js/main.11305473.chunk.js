(this["webpackJsonpgpea-en-62911-zh-tw.2020-plastic-retailer-seveneleven.signup"]=this["webpackJsonpgpea-en-62911-zh-tw.2020-plastic-retailer-seveneleven.signup"]||[]).push([[0],{16:function(e,t,n){"use strict";n.r(t);n(7),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(2),o=n.n(a),i=n(5),r=(n(9),n(10)),s=window,c=s.$,u=(s.dataLayer,s.currency);function d(){return(d=Object(i.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.querySelector('input[name="numSignupTarget"]')?parseInt(document.querySelector('input[name="numSignupTarget"]').value,10):0,n=document.querySelector('input[name="numResponses"]')?parseInt(document.querySelector('input[name="numResponses"]').value,10):0,(isNaN(n)||n<17900)&&(n+=17900),(isNaN(t)||t<2e4)&&(t=2e4),n>t&&(t=1e4*Math.ceil(n/1e4)),c("#petition-goal").html(u(t,{precision:0,separator:","}).format()),c("#petition-count").html(u(n,{precision:0,separator:","}).format()),a=n/t,new r.Line("#progress-bar",{strokeWidth:3,easing:"easeInOut",duration:1400,color:"#FFEA82",trailColor:"#eee",trailWidth:1,svgStyle:{width:"100%",height:"100%"}}).animate(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(document).ready((function(){!function(){d.apply(this,arguments)}(),function(){var e=(new Date).getFullYear();c("#fake_supporter_birthYear").append('<option value="">\u51fa\u751f\u5e74\u4efd</option>');for(var t=0;t<100;t++){var n='<option value="'.concat(e-t,'-01-01">').concat(e-t,"</option>");c("#fake_supporter_birthYear").append(n),c("#en__field_supporter_NOT_TAGGED_6").append(n)}}(),p(),function(){var e=function(){var e="FRESH";e=2===window.pageJson.pageNumber?"SUCC":"FRESH";return e}();"FRESH"===e?c(".page-2").hide():"SUCC"===e&&(c(".page-1").hide(),c(".page-2").show(),c("section").hide(),c("#home").show())}()}));var l=function(){c("#page-loading").addClass("hide"),setTimeout((function(){c("#page-loading").remove()}),1100)},p=function(){c("#center_sign-submit").click((function(e){e.preventDefault(),c("#fake-form").submit()})).end(),c.validator.addMethod("email",(function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/i.test(e)}),"Email \u683c\u5f0f\u932f\u8aa4"),c.validator.addMethod("taiwan-phone",(function(e,t){var n=new RegExp(/^(0|886|\+886)?(9\d{8})$/).test(e),a=new RegExp(/^(0|886|\+886){1}[3-8]-?\d{6,8}$/).test(e),o=new RegExp(/^(0|886|\+886){1}[2]-?\d{8}$/).test(e);return!c("#fake_supporter_phone").val()||(n||a||o)}),"\u96fb\u8a71\u683c\u5f0f\u4e0d\u6b63\u78ba\uff0c\u8acb\u53ea\u8f38\u5165\u6578\u5b57 0912345678 \u548c 02-23456789"),c.validator.addClassRules({email:{email:!0},"taiwan-phone":{"taiwan-phone":!0}}),c("#fake-form").validate({errorPlacement:function(e,t){t.parents("div.form-field:first").after(e)},submitHandler:function(e){0===c("#page-loading").length&&c("body").append('<div id="page-loading" class="hide">\n\t\t\t  <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>\n\t\t\t</div>'),setTimeout((function(){c("#page-loading").removeClass("hide")}),0),c('#mc-form [name="FirstName"]').val(c("#fake_supporter_firstName").val()),c('#mc-form [name="LastName"]').val(c("#fake_supporter_lastName").val()),c('#mc-form [name="Email"]').val(c("#fake_supporter_emailAddress").val()),c('#mc-form [name="MobilePhone"]').val(c("#fake_supporter_phone").val()),c('#mc-form [name="Birthdate"]').val(c("#fake_supporter_birthYear").val()),c('#mc-form [name="OptIn"]').eq(0).prop("checked",c("#fake_optin").prop("checked"));var t=new FormData;c("#mc-form input").each((function(e,n){var a=null;a="checkbox"===n.type?n.checked:n.value,t.append(n.name,a)}));var n=c("#mc-form").prop("action");fetch(n,{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){var t,n;e&&(e.Supporter&&(t="2020-plastic_retailer_seveneleven",window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"gaEvent",eventCategory:"petitions",eventAction:"signup",eventLabel:t,eventValue:n}),window.dataLayer.push({event:"fbqEvent",contentName:t,contentCategory:"Petition Signup"}),window.uetq=window.uetq||[],window.uetq.push("event","signup",{event_category:"petitions",event_label:t,event_value:0})),function(e){if(1===e)c(".page-2").hide();else{if(2!==e)throw new Error("Unkonw PageNo:"+e);c(".page-1").hide(),c(".page-2").show(),window.scrollTo({top:0,left:0,behavior:"smooth"}),c("#email-content").hide(),c("#counter-section").hide(),c("#services").hide(),c("#contact").hide()}}(2)),l()})).catch((function(e){l(),m(),console.error(e)}))},invalidHandler:function(e,t){var n=t.numberOfInvalids();n&&console.log(n)}});var e=["me.com","outlook.com","netvigator.com","cloud.com","live.hk","msn.com","gmail.com","hotmail.com","ymail.com","yahoo.com","yahoo.com.tw","yahoo.com.hk"],t=["com","net","org"],a=n(15);c("#fake_supporter_emailAddress").on("blur",(function(){var n=this;a.run({email:c("#fake_supporter_emailAddress").val(),domains:e,topLevelDomains:t,suggested:function(e){c('<div class="email-suggestion">\u60a8\u60f3\u8f38\u5165\u7684\u662f <strong id="emailSuggestion">'.concat(e.full,"</strong> \u55ce\uff1f</div>")).insertAfter("#fake_supporter_emailAddress"),c(".email-suggestion").click((function(){c("#fake_supporter_emailAddress").val(c("#emailSuggestion").html()),c(".email-suggestion").remove()}))},empty:function(){n.emailSuggestion=null}})}));var o=window.location.search;"dd"===new URLSearchParams(o).get("utm_source")&&(c(".is-hidden-at-dd-page-only").hide(),c("#fake_supporter_phone").removeAttr("required"))},m=function(){0===c("#submitted-error").length&&c("body").append('<div id="submitted-error">\u62b1\u6b49\uff0c\u9023\u7f72\u6642\u767c\u751f\u554f\u984c\uff0c\u8acb\u7a0d\u5f8c\u518d\u5617\u8a66</div>'),c("#submitted-error").click((function(){c("#submitted-error").remove()}))};"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,t,n){e.exports=n(16)},7:function(e,t,n){},9:function(e,t,n){}},[[6,1,2]]]);
//# sourceMappingURL=main.11305473.chunk.js.map